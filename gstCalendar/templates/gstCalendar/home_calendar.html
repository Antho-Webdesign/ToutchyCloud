{% extends 'base.html' %}
{% load static %}

{% block content %}
    <style>

        #addAppointmentForm {
            display: flex;
            flex-direction: column;
        }


        table {
            width: 50%;
            margin: 45px auto;
        }

        tbody, td, tfoot, th, thead, tr {

            border-width: 1px;
            text-align: center;
        }

    </style>


    <script>


    </script>


    <div id='calendrier'>
    </div>

    {{ cal|safe }}



    <h3 class="text-center">Form</h3>
    <div class="column">
        <div class="col-md-8 offset-md-2">
            <form id="addAppointmentForm" method="POST">
                {% csrf_token %}
                <input class="mb-5" type="text" name="title" placeholder="Titre">
                <input class="mb-5" type="text" name="description" placeholder="Desc">

                <input class="mb-5" type="text" name="start_time" placeholder="Date de dÃ©but">
                <input class="mb-5" type="text" name="end_time" placeholder="Date de fin">
                <input class="mb-5" type="text" name="location" placeholder="Locations">
                <input class="mb-5" type="text" name="participants" placeholder="participants">
                <button type="submit">Ajouter</button>
            </form>
        </div>
    </div>

    <div class="retour-englobe mt-5">
        <a class="retour btn btn-warning" href="{% url 'home' %}">Retour</a>
    </div>

    <div id='calendar'>
    </div>

    {% block extrascript %}
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var calendarEl = document.getElementById('calendar');
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    header: {
                        left: 'prev, next, today',
                        center: 'title',
                        right: 'dayGridMonth, timeGridWeek, list',
                    },
                    header: {
                        left: 'prev, next today',
                        center: 'title',
                        right: 'dayGridMonth, timeGridWeek, list',
                    },
                    buttonText: {
                        today: 'Aujourd\'hui(calendar)',
                        month: 'mois',
                        week: 'semaine',
                        list: 'Liste'
                    },
                });
                calendar.render();
            });


            evenements = [{
                title: 'live demo',
                start_time: '2023-04-26 09:00:00',
                end_time: '2023-04-26 19:00:00',
                description: 'blablavbla',
            }]

            window.onload = () => {
                let elementCalendrier = document.getElementById("calendar")


                // instanciation du calendrier
                let calendar = new FullCalendar.Calendar(elementCalendrier, {
                    // appel des composants
                    plugin: ['davGrid', 'timeGrid', 'list'],
                    defaultView: 'timeGridWeek',
                    selectable: true,
                    locale: 'fr',
                    header: {
                        left: 'prev, next today',
                        center: 'title',
                        right: 'dayGridMonth, timeGridWeek, list',
                    },
                    buttonText: {
                        today: 'Aujourd\'hui(calendar)',
                        month: 'mois',
                        week: 'semaine',
                        list: 'Liste'
                    },

                    events: [
                        {
                            {% for event in events %}
                                title: '{{ event.title }}',
                                start: '{{ event.start_time }}',
                                end: '{{ event.end_time }}',
                            {% endfor %}
                        },
                        {
                            title: 'Long Event',
                            start: '2023-03-07',
                            end: '2023-03-10'
                        },
                        {
                            groupId: '999',
                            title: 'Repeating Event',
                            start: '2023-03-09T16:00:00'
                        },
                        {
                            groupId: '999',
                            title: 'Repeating Event',
                            start: '2023-03-16T16:00:00'
                        },
                        {
                            title: 'Conference',
                            start: '2023-04-11',
                            end: '2023-04-13'
                        },
                        {
                            title: 'Meeting',
                            start: '2023-04-12T10:30:00',
                            end: '2023-04-12T12:30:00'
                        },
                        {
                            title: 'Lunch',
                            start: '2023-04-12T12:00:00'
                        },
                        {
                            title: 'Meeting',
                            start: '2023-04-12T14:30:00'
                        },
                        {
                            title: 'Birthday Party',
                            start: '2023-04-13T07:00:00'
                        },
                        {
                            title: 'Click for Google',
                            url: 'http://google.com/',
                            start: '2023-04-28'
                        }
                    ],
                })
                calendar.render()
            }

        </script>
    {% endblock extrascript %}
{% endblock %}